/***************************************************************************************************************************************************************
 *
 * Checking cli options and flags
 *
 * @repo    - https://github.com/govau/pancake
 * @author  - Dominik Wilkowski
 * @license - https://raw.githubusercontent.com/govau/pancake/master/LICENSE (MIT)
 *
 **************************************************************************************************************************************************************/

'use strict';

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.init = undefined;

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _parseArguments = require('./parse-arguments');

var _helpers = require('./helpers');

var _logging = require('./logging');

var _cwd = require('./cwd');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Default export
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
 * [description]
 * @param  {[type]} argv [description]
 * @return {[type]}      [description]
 */


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Module imports
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
var init = exports.init = function init() {
  var argv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : process.argv;


  _logging.Log.info('PANCAKE MIXING THE BATTER');

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Get global settings
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  //

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Parsing cli arguments
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  (0, _parseArguments.ParseArgs)();

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Set global settings
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  //


  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Finding the current working directory
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  var pkgPath = (0, _cwd.Cwd)();

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // check for conflicts
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  //

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Install all plugins
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  //

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Run all plugins
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  //

  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Adding some event handling to exit signals
  //--------------------------------------------------------------------------------------------------------------------------------------------------------------
  process.on('exit', _helpers.ExitHandler.bind(null, { now: false })); //on closing
  process.on('SIGINT', _helpers.ExitHandler.bind(null, { now: true })); //on [ctrl] + [c]
  process.on('uncaughtException', _helpers.ExitHandler.bind(null, { now: true })); //on uncaught exceptions
};